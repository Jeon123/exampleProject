<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  data-layout-decorate="~{layout/default}"
	  >
<head>
  <script type="text/javascript">
  	function page(pageNum) {
  		location.href = "/?pageNum=" + pageNum;
  	}
  	
  	function nextPage(pageNum) {
  		var num = parseInt(pageNum) + 1
  		location.href = "/?pageNum=" + num;
  	}
  	
  	function prevPage(pageNum) {
  		var num = parseInt(pageNum) - 1
  		location.href = "/?pageNum=" + num;
  	}
  	
  	function getPost(freeId) {
  		location.href = "/" + freeId;
  	}
  	
  	$(document).on("submit", "#search", function(event){
  		event.preventDefault();
  		if($("#searchText").val()=="") {
  			alert("검색어를 입력해 주세요.");
  		}else {
	  		location.href = "search/" + $("#searchText").val();
  		}
  	});
  </script>
</head>

  <div layout:fragment="content" class="col-sm-10 text-left"> 
    <h4>FreeBoard</h4>
    <button th:if="${session.loginUser!=null}" onclick="location.href='/boardWrite'">글쓰기</button>
    <table>
    	<thead>
    		<tr>
    			<th>&nbsp;&nbsp;글 제목&nbsp;&nbsp;</th>
    			<th>&nbsp;&nbsp;작성&nbsp;&nbsp;</th>
    		</tr>
    	</thead>
    	<tbody id="textsearch">
	<th:block th:if="${freeBoard!=null}">
		<th:block th:each="board:${freeBoard}">
			<tr>
				<td><a th:onclick="|javascript:getPost('${board.freeId}')|" th:text="${board.title}"></a></td>
				<td><span th:text="${board.writer}"></span></td>
			</tr>
		</th:block>
	</th:block>
    	</tbody>
    </table>
    
    <!-- 페이지 번호 -->
     <th:block th:if=${pageMaker.totalCount!=0}>
     <a th:if="${pageMaker.pageNum!=1}" style="text-decoration: none" th:onclick="|javascript:page('1')|">&laquo;&laquo;</a>
     <a th:if="${pageMaker.pageNum!=1}" style="text-decoration: none" th:onclick="|javascript:prevPage('${pageMaker.pageNum}')|">&laquo;</a>
     <th:block th:each="pageNumber:${#numbers.sequence(pageMaker.startPage, pageMaker.endPage)}">
     	&nbsp;<a th:onclick="|javascript:page('${pageNumber}')|" th:text="${pageNumber}"></a>&nbsp;
     </th:block>
     <a th:if="${(pageMaker.pageNum)!=pageMaker.totalPageNum}" style="text-decoration: none" th:onclick="|javascript:nextPage('${pageMaker.pageNum}')|">&raquo;</a>
     <a th:if="${(pageMaker.pageNum)!=pageMaker.totalPageNum}" style="text-decoration: none" th:onclick="|javascript:page('${pageMaker.totalPageNum}')|">&raquo;&raquo;</a>
    </th:block>
    <hr>
  </div>
    
</html>
